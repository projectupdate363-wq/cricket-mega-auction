{% extends "base.html" %}
{% block content %}
<div class="login-container">
  <form id="loginForm" class="login-form">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username" required>
    <input type="password" id="password" placeholder="Password" required>
    <button type="submit">Login</button>
  </form>
</div>
<script>
  const loginForm = document.getElementById('loginForm');
  loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const response = await fetch('/login', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify({username, password})
      });
      const data = await response.json();
      if (data.success) {
          if (data.is_admin) {
              window.location.href = '/admin';
          } else {
              window.location.href = '/bidder';
          }
      } else {
          alert(data.message || "Login failed");
      }
  });
</script>
{% endblock %}
